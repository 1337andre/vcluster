---
title: Monitoring & Metrics API
sidebar_label: Monitoring & Metrics API
---

You can monitor the vcluster either from the host cluster or directly from within the vcluster.

:::info
In order to get node metrics from within the vcluster, vcluster will need to have RBAC permissions to access them. You can enable this via `vcluster create myvcluster --create-cluster-role`
:::

## Installing metrics server

Make sure the vcluster has access to the host clusters nodes (create via the `--create-cluster-role` or set the helm value `rbac.clusterRole.create: true`). Install the [metrics server](https://github.com/kubernetes-sigs/metrics-server#installation) via the official method into the vcluster.

Wait until the metrics server has started. You should be now able to use `kubectl top pods` and `kubectl top nodes` within the vcluster:
```


```

### How does it work?

By default, vcluster will create a service for each node which redirects incoming traffic from within the vcluster to the node kubelet to vcluster itself. This means that if workloads within the vcluster try to scrape node metrics the traffic reaches vcluster first. Vcluster will redirect the incoming request to the host cluster and rewrite the response (pod names, pod namespaces etc) and return it to the requester.

## Monitoring the vcluster

Vcluster is able to rewrite node stats and metrics. This means monitoring a vcluster works similar to monitoring a regular Kubernetes cluster.

:::info
You need to make sure the vcluster has access to the host clusters nodes (create via the `--create-cluster-role` or set the helm value `rbac.clusterRole.create: true`).
:::

Please follow the [official Kuberentes documentation](https://kubernetes.io/docs/tasks/debug-application-cluster/resource-usage-monitoring/) on how to monitor a Kubernetes cluster.

### How does it work?

By default, vcluster will create a service for each node which redirects incoming traffic from within the vcluster to the node kubelet to vcluster itself. This means that if workloads within the vcluster try to scrape node metrics the traffic reaches vcluster first. Vcluster will redirect the incoming request to the host cluster and rewrite the response (pod names, pod namespaces etc) and return it to the requester.

## Monitoring the vcluster StatefulSet

vcluster exposes metrics 
